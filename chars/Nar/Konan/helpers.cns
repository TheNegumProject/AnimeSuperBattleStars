
;-------------------------------------------------------------------
; Explosive Seal - Papel
[Statedef 900]
type    = S
movetype= I
physics = N
juggle  = 1
velset = (random/600.0*2-1)*ifelse(random%2,1,-1), (random/600.0*2-1)*ifelse(random%2,1,-1)
ctrl = 0
anim = 950
sprpriority = -1

[State 200, Explosion]
type = Changestate
trigger1 = animtime = 0
value = 901
;-------------------------------------------------------------------------------
; Explosive Seal - Explosion
[Statedef 901]
type    = S
movetype= A
physics = S
juggle  = 9
velset = 0,0
ctrl = 0
anim = 1290
sprpriority = 2

[State 0, Pause]
type = Pause
triggerall = var(2) = 1
trigger1 = movehit = 1
time = 3
movetime = 0

[State 0, EnvShake]
type = EnvShake
triggerall = var(2) = 1
trigger1 = movehit = 1
time = 5
freq = 60
ampl = -4
phase = 90

[State 0, AttackMulSet]
type = AttackMulSet
trigger1 = var(2) = 1
value = 1.2

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 10

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 =  time = 5
statetype = S
movetype = I
physics = S

[State 0, FX Fuego]
type = Explod
triggerall = numexplod(1352) = 0
trigger1 = time = 0
anim = 1280
ID = 1280
pos = 0,-5
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .4,.4
sprpriority = 3
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1,11
volume = 50

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = invisible
ignorehitpause = 1

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = S, SP
animtype  = Up
damage    = 4,2
Hitflag = MAFDE
guardflag = MA
pausetime = 0,2
sparkno = -1
guard.sparkno = S7000
sparkxy = 0,0
hitsound   = -1
guardsound = -1
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4,-8
air.velocity = -4,-6
Fall = 1
PalFX.time = 60
PalFX.add = -100,-100,-100
PalFX.mul = 100,100,100
PalFX.sinadd = -100,-100,-100,10
PalFX.invertall = 0
PalFX.color = 256
Fall.Recover = 1
sprpriority = 2
getpower = 0,0

[State 0, Fuego P2]
type = Helper
trigger1 = movehit = 1 && numhelper(4600) = 0
helpertype = normal
name = "Fuego P2"
ID = 4600
stateno = 4600
pos = 9999,9999999
postype = p1
ownpal = 1

[State 200, End]
type = Destroyself
trigger1 = animtime = 0

;-------------------------------------------------------------------------------
; Explosion
[Statedef 902]
type    = S
movetype= A
physics = S
juggle  = 9
velset = 0,0
ctrl = 0
anim = 1295
sprpriority = 2

[State 0, Pause]
type = Pause
triggerall = var(2) = 1
trigger1 = movehit = 1
time = 3
movetime = 0

[State 0, EnvShake]
type = EnvShake
triggerall = var(2) = 1
trigger1 = movehit = 1
time = 5
freq = 60
ampl = -4
phase = 90

[State 0, AttackMulSet]
type = AttackMulSet
trigger1 = var(2) = 1
value = 1.2

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 10

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 =  time = 5
statetype = S
movetype = I
physics = S

[State 0, FX Fuego]
type = Explod
triggerall = numexplod(1295) < 8
trigger1 = time = 0
anim = 1295
ID = 1295
pos = -10+random%30,10-random%20
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .3,.35
sprpriority = 3
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1,11
volume = 50

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = invisible
ignorehitpause = 1

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = S, SP
animtype  = Up
damage    = 4,2
Hitflag = MAFD
guardflag = MA
pausetime = 0,2
sparkno = -1
guard.sparkno = S7000
sparkxy = 0,0
hitsound   = -1
guardsound = -1
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 0,-2
air.velocity = 0,-1+random%1
Fall = 1
PalFX.time = 60
PalFX.add = -100,-100,-100
PalFX.mul = 100,100,100
PalFX.sinadd = -100,-100,-100,10
PalFX.invertall = 0
PalFX.color = 256
Fall.Recover = 1
sprpriority = 2
getpower = 0,0

[State 0, Fuego P2]
type = Helper
trigger1 = movehit = 1 && numhelper(4600) = 0
helpertype = normal
name = "Fuego P2"
ID = 4600
stateno = 4600
pos = 9999,9999999
postype = p1
ownpal = 1

[State 200, End]
type = Destroyself
trigger1 = animtime = 0